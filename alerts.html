<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;}

body{
  background:linear-gradient(to bottom,#0a0a0a,#111,#1a1a1a,#222);
  min-height:100vh;
  padding:15px;
  color:white;
}

/* NAV BAR */
.nav{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(6px);
  padding:12px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.35);
  display:flex;
  justify-content:space-around;
  font-size:15px;
  margin-bottom:20px;
}

.nav a{
  color:white;
  text-decoration:none;
  font-weight:700;
}

/* PAGE TITLE */
h2{
  text-align:center;
  font-size:28px;
  font-weight:800;
  margin-bottom:20px;
}

/* ALERT BOX */
.item{
  background:rgba(255,255,255,0.07);
  padding:20px;
  border-radius:16px;
  backdrop-filter:blur(5px);
  box-shadow:0 6px 18px rgba(0,0,0,0.45);
  margin-bottom:18px;
  transition:0.25s;
}

.item:hover{
  transform:scale(1.03);
  background:rgba(255,255,255,0.12);
}

.item h3{
  margin:0 0 10px 0;
  font-size:22px;
  font-weight:800;
}

.item p{
  margin:8px 0;
  font-size:18px;
}

.red{
  background:rgba(255,80,80,0.9);
  color:white;
}
</style>
</head>

<body>

<!-- NAVIGATION -->
<div class="nav">
  <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="alerts.html">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</a>
  <a href="reasons.html">Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨</a>
  <a href="schedule.html">Ø§Ù„Ø¬Ø¯ÙˆÙ„</a>
  <a href="reports.html">Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</a>
</div>

<!-- TITLE -->
<h2>ğŸ”” Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h2>

<!-- LIST -->
<div id="list">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

<!-- FIREBASE SCRIPT -->
<script type="module">
import { db } from "./firebase.js";
import { collection, getDocs } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

function formatDate(ts) {
  if (!ts) return "â€”";
  const date = ts.toDate();
  return date.toLocaleString("ar-EG", {
    year: "numeric",
    month: "long",
    day: "numeric",
    hour: "2-digit",
    minute: "2-digit"
  });
}

async function loadAlerts() {
  const list = document.getElementById("list");
  list.innerHTML = "<p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>";

  try {
    const snap = await getDocs(collection(db, "alerts"));

    let html = "";
    snap.forEach(doc => {
      const a = doc.data();

      html += `
        <div class="item red">
          <h3>${a.title}</h3>
          <p>${a.text}</p>

          <hr style="border:0;border-top:1px solid #ffffff44; margin:12px 0;">

          <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${a.active ? "ğŸ”µ Ù†Ø´Ø·" : "âš« ØºÙŠØ± Ù†Ø´Ø·"}</p>
          <p><strong>ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©:</strong> ${formatDate(a["ÙˆÙ‚Øª Ø§Ù„Ø§Ø¶Ø§ÙÙ‡"])}</p>
        </div>
      `;
    });

    list.innerHTML = html || "<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</p>";

  } catch (err) {
    list.innerHTML = "<p>Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>";
    console.error(err);
  }
}

loadAlerts();
</script>

</body>
</html>
